# CREAR EL VOLCADO
**Creamos una carpeta para la práctica**
```bash
sudo mkdir -p  ./practica_docker
```
```bash
cd practica_docker
```
**Creamos un fichero y comprobamos si tiene permisos de lectura:**
```bash
sudo nano dump.sql
```
```bash
ls -l dump.sql
```
**A continuación pegaremos el siguiente código:**
```bash
CREATE DATABASE IF NOT EXISTS test;
USE test;

CREATE TABLE IF NOT EXISTS posts (
    id INT AUTO_INCREMENT PRIMARY KEY,
    title VARCHAR(255),
    content TEXT
);

-- Insertamos algunos datos de prueba
INSERT INTO posts (title, content) VALUES ('Post 1', 'Contenido de prueba 1');
INSERT INTO posts (title, content) VALUES ('Post 2', 'Contenido de prueba 2');
-- (En la práctica real habría 11.100 registros, pero con estos basta para probar)
```
<img width="810" height="332" alt="image" src="https://github.com/user-attachments/assets/6a05c0df-d311-4032-b200-222f95db6f89" />

# Crearemos un contenedor convencional
**Ejecutaremos lo siguiente:**
```bash
docker run -d --rm --name mysqlsintmpfs -p 3306:3306 -v /home/sergi/dump.sql:/docker-entrypoint-initdb.d/dump.sql -e MYSQL_ALLOW_EMPTY_PASSWORD=TRUE -e MYSQL_USER=cefireuser -e MYSQL_PASSWORD=cefirepass mysql:5.6
```
<img width="806" height="112" alt="image" src="https://github.com/user-attachments/assets/043c69f5-d138-4240-aa3c-98746b3830ed" />

# Segundo contenedor con optimización
**Ejecutaremos lo siguiente:**
```bash
docker run -d --rm --name mysqlcontmpfs -p 3307:3306 -v /home/sergi/dump.sql:/docker-entrypoint-initdb.d/dump.sql --tmpfs /var/lib/mysql:rw,noexec,nosuid,size=1024m -e MYSQL_ALLOW_EMPTY_PASSWORD=TRUE -e MYSQL_USER=cefireuser -e MYSQL_PASSWORD=cefirepass mysql:5.6
```
<img width="811" height="111" alt="image" src="https://github.com/user-attachments/assets/ac25c3c1-c4ed-4a9e-a811-9c1ac1db7abd" />

# ENTRAR A LOS CONTENEDORES
**Ejecutaremos lo sigueinte para entrar al contenedor sin tmpfs:**
```bash
sudo docker exec -it mysqlsintmpfs bash
```
**Entramos en root**
```bash
mysql -u root
```
**Ejecutaremos esta consulta:**
```bash
USE test;
SELECT SQL_NO_CACHE * FROM posts;
```
<img width="416" height="213" alt="image" src="https://github.com/user-attachments/assets/ce52d6ae-2e83-4cb4-bf57-24506a72c322" />

**Y lo mismo con tmpfs**
```bash
sudo docker exec -it mysqlcontmpfs bash
```
**Entramos en root**
```bash
mysql -u root
```
**Ejecutaremos esta consulta:**
```bash
USE test;
SELECT SQL_NO_CACHE * FROM posts;
```
<img width="416" height="213" alt="image" src="https://github.com/user-attachments/assets/ce52d6ae-2e83-4cb4-bf57-24506a72c322" />




















